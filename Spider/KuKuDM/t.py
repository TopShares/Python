#encoding=utf-8
html = '''

<!doctype html><html><head>    <meta http-equiv='Content-Type' content='text/html; charset=gbk'/>    <meta name='viewport'          content='width=device-width,initial-scale=1.0, minimum-scale=1.0,maximum-scale=1.0,user-scalable=no'/>    <meta http-equiv='X-UA-Compatible' content='IE=edge'/>    <meta name='format-detection' content='telephone=no'/>    <meta name='apple-mobile-web-app-capable' content='yes'>    <meta name='apple-mobile-web-app-status-bar-style' content='white'>        <meta name='wap-font-scale' content='no'>            <meta name='keywords' content='理科生坠入情网,理科生坠入情网漫画,理科生坠入情网在线漫画,手机漫画,KuKu动漫'/><meta name='Description' content='KuKu动漫手机漫画提供理科生坠入情网在线漫画，是国内理科生坠入情网漫画最全更新最快的手机漫画网。理科生坠入情网漫画介绍：理科生坠入情网=理科生坠入情网，故尝试证明,热衷于研究的理科男女若是陷入情网会是如何？ 以充满个性的理科生所聚集的研究室为舞台，山本アリフレッド所创作的，有爆笑有心动的实验理科恋爱喜剧开始了！'/>    <title>理科生坠入情网-理科生坠入情网漫画-理科生坠入情网在线漫画-KuKu动漫手机漫画</title>    <link href='/css/global.css' rel='stylesheet' type='text/css'/>    <link type='text/css' href='/css/style.css' rel='stylesheet'/>    <script type='text/javascript' src='/js/jquery-1.9.1.min.js'></script>    <script type='text/javascript' src='/js/jquery.cookie.js' charset='utf-8'></script>    <script type='text/javascript' src='/js/common.js'></script><script type='text/javascript' src='/js/m_reader.js'></script></head><body>        <script type='text/javascript' src='/js/sort.js' ></script><div class='Introduct'>                <!--head-->        <div class='subHeader'>            <div class='BarTit' id='comicName'>理科生坠入情网</div>            <a href='javascript:' class='iconRet' onclick='goBack()'></a>        </div>        <!--head end-->        <div class='Introduct_Sub autoHeight'>            <div class='pic' id='Cover'>                <img src='http://img.1whour.com/xpic/理科生坠入情网.jpg' width='100%' title='理科生坠入情网'>            </div>            <div class='sub_r'><p class='txtItme'><span class='icon icon01'></span>山本アリフレッド  </p><p class='txtItme'><span class='icon icon02'></span>首字L </p><p class='txtItme'><span class='icon icon02'></span>连载</p><p class='txtItme'><span class='icon icon03'></span><span class='date'>2019/4/14 4:04:40</span></p></div>        </div>        <p class='txtDesc autoHeight'>漫画介绍:理科生坠入情网=理科生坠入情网，故尝试证明,热衷于研究的理科男女若是陷入情网会是如何？ 以充满个性的理科生所聚集的研究室为舞台，山本アリフレッド所创作的，有爆笑有心动的实验理科恋爱喜剧开始了！</p>        <p class='openBtn'></p>     <div class='Sub_H2 autoHeight'>            <span class='icon Icon9'></span>            <span class='Title'>漫画章节列表</span>        </div>    </div><script type='text/javascript' src='/js/b.js' ></script><div class='classBox autoHeight'>           <div class='classopen' id='list'><li><a href='/comiclist/2286/70563/1.htm'>科生坠入情网,故尝试证明32话</a></li><li><a href='/comiclist/2286/70415/1.htm'>科生坠入情网,故尝试证明[番外篇14]</a></li><li><a href='/comiclist/2286/70275/1.htm'>科生坠入情网,故尝试证明31话</a></li><li><a href='/comiclist/2286/69862/1.htm'>科生坠入情网,故尝试证明[番外篇13]</a></li><li><a href='/comiclist/2286/69827/1.htm'>科生坠入情网,故尝试证明30话</a></li><li><a href='/comiclist/2286/69323/1.htm'>科生坠入情网,故尝试证明29话</a></li><li><a href='/comiclist/2286/67363/1.htm'>科生坠入情网,故尝试证明28话</a></li><li><a href='/comiclist/2286/66834/1.htm'>科生坠入情网,故尝试证明27话</a></li><li><a href='/comiclist/2286/66134/1.htm'>科生坠入情网,故尝试证明26话下</a></li><li><a href='/comiclist/2286/66108/1.htm'>理科生坠入情网,故尝试证明26话</a></li><li><a href='/comiclist/2286/65651/1.htm'>理科生坠入情网,故尝试证明[番外篇12]</a></li><li><a href='/comiclist/2286/65328/1.htm'>理科生坠入情网,故尝试证明[番外篇10]</a></li><li><a href='/comiclist/2286/65302/1.htm'>理科生坠入情网,故尝试证明[番外篇11]</a></li><li><a href='/comiclist/2286/64879/1.htm'>理科生坠入情网,故尝试证明25话</a></li><li><a href='/comiclist/2286/64230/1.htm'>理科生坠入情网,故尝试证明[番外篇9]</a></li><li><a href='/comiclist/2286/64149/1.htm'>理科生坠入情网,故尝试证明24话</a></li><li><a href='/comiclist/2286/63015/1.htm'>理科生坠入情网,故尝试证明23话</a></li><li><a href='/comiclist/2286/62688/1.htm'>理科生坠入情网,故尝试证明22话</a></li><li><a href='/comiclist/2286/61929/1.htm'>理科生坠入情网,故尝试证明21话</a></li><li><a href='/comiclist/2286/61549/1.htm'>理科生坠入情网,故尝试证明[番外篇8]</a></li><li><a href='/comiclist/2286/61518/1.htm'>理科生坠入情网,故尝试证明20话</a></li><li><a href='/comiclist/2286/60794/1.htm'>理科生坠入情网,故尝试证明[番外篇7]</a></li><li><a href='/comiclist/2286/60324/1.htm'>理科生坠入情网,故尝试证明[番外篇6]</a></li><li><a href='/comiclist/2286/60236/1.htm'>理科生坠入情网,故尝试证明19话</a></li><li><a href='/comiclist/2286/60150/1.htm'>理科生坠入情网,故尝试证明18话</a></li><li><a href='/comiclist/2286/59918/1.htm'>理科生坠入情网,故尝试证明17话</a></li><li><a href='/comiclist/2286/59415/1.htm'>理科生坠入情网,故尝试证明16话</a></li><li><a href='/comiclist/2286/59092/1.htm'>理科生坠入情网,故尝试证明15话</a></li><li><a href='/comiclist/2286/58797/1.htm'>理科生坠入情网,故尝试证明[番外篇5]</a></li><li><a href='/comiclist/2286/58370/1.htm'>理科生坠入情网,故尝试证明14话</a></li><li><a href='/comiclist/2286/58296/1.htm'>理科生坠入情网故尝试证明 单行本附录</a></li><li><a href='/comiclist/2286/57800/1.htm'>理科生坠入情网,故尝试证明[番外篇4]</a></li><li><a href='/comiclist/2286/57571/1.htm'>理科生坠入情网,故尝试证明13话</a></li><li><a href='/comiclist/2286/57196/1.htm'>理科生坠入情网,故尝试证明12话</a></li><li><a href='/comiclist/2286/57195/1.htm'>理科生坠入情网,故尝试证明11话</a></li><li><a href='/comiclist/2286/57194/1.htm'>理科生坠入情网,故尝试证明10话</a></li><li><a href='/comiclist/2286/57193/1.htm'>理科生坠入情网,故尝试证明9话</a></li><li><a href='/comiclist/2286/57192/1.htm'>理科生坠入情网,故尝试证明[番外篇3]</a></li><li><a href='/comiclist/2286/57191/1.htm'>理科生坠入情网,故尝试证明8话</a></li><li><a href='/comiclist/2286/57190/1.htm'>理科生坠入情网,故尝试证明[番外篇2]</a></li><li><a href='/comiclist/2286/57189/1.htm'>理科生坠入情网,故尝试证明7话</a></li><li><a href='/comiclist/2286/57188/1.htm'>理科生坠入情网,故尝试证明6话</a></li><li><a href='/comiclist/2286/57187/1.htm'>理科生坠入情网,故尝试证明5话</a></li><li><a href='/comiclist/2286/57186/1.htm'>理科生坠入情网,故尝试证明[番外篇]</a></li><li><a href='/comiclist/2286/57185/1.htm'>理科生坠入情网,故尝试证明4话</a></li><li><a href='/comiclist/2286/57184/1.htm'>理科生坠入情网,故尝试证明3话</a></li><li><a href='/comiclist/2286/57183/1.htm'>理科生坠入情网,故尝试证明2话</a></li><li><a href='/comiclist/2286/57182/1.htm'>理科生坠入情网,故尝试证明1话</a></li>    </div>    <div class='imgBox'>        <ul class='col_3_1' id='classify_container'>                            <li>                </li>                    </ul>    </div>	<div class='bottom'>        <div class='pageLine'><img src='/images/head_line.gif' width='100%'></div>        <ul class='subNav'><li><a href='/'><span class='a1'>返回首页</span></a></li><li><a href='/top100.htm'><span class='a8'>今日更新</span></a></li><li class='last'><a href='javascript:;' onClick='m_global.toTop()'><span class='a6'>返回顶部</span></a></li>        </ul><script type='text/javascript' src='/mg/t.js'></script>        <p class='record'>&#169;2004-2018 kukudm.com</p>	</div>            </div></body></html>

'''


from lxml import etree
import os
html = etree.HTML(html)
url = 'https://m.kukukkk.com/comiclist/2286/'
folder = html.xpath('//*[@id="comicName"]/text()')
folder = './' + folder[0]
isExists = os.path.exists(folder)
if not isExists:  # 目录不存在，则创建
    os.makedirs(folder)
e = html.xpath('//*[@class="classBox autoHeight"]/div/li//a')
data = []
tmp = {}
for i in e:

	tmp['url'] ='https://m.kukukkk.com'+ i.xpath('./@href')[0]
	tmp['txt'] = folder + '/' +  i.xpath('./text()')[0]
	# tmp['url'] = (i.xpath('./@href'))
	data.append(tmp)
	tmp = {}

def getPicUrlList(data):


	html = '''
<!doctype html>
<html>
<head>
    <meta http-equiv='Content-Type' content='text/html; charset=gbk'/>
    <meta name='viewport'
          content='width=device-width,initial-scale=1.0, minimum-scale=1.0,maximum-scale=2.0,user-scalable=1'/>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'/>
    <meta name='format-detection' content='telephone=no'/>
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <meta name='apple-mobile-web-app-status-bar-style' content='white'>
        <meta name='wap-font-scale' content='no'>
        
    <meta name='Keywords' content='理科生坠入情网漫画,理科生坠入情网在线漫画,理科生坠入情网手机漫画,kuku动漫手机版'/>
    <meta name='Description' content='kuku动漫,国内最早在线漫画站点之一,提供理科生坠入情网漫画手机版免费浏览,每日更新最热门连载漫画在线欣赏,是动漫爱好者的交流互动平台'/>
    <title>科生坠入情网,故尝试证明32话在线漫画_理科生坠入情网手机漫画_kuku动漫手机版</title>
<link href='/css/global.css' rel='stylesheet' type='text/css'/>
<link type='text/css' href='/css/style.css' rel='stylesheet'/>
<script language='javascript' src='/js2/js0.js'></script>
<script language='javascript' src='/js2/js4.js'></script>
</head>
<body>
<script type='text/javascript' src='/mg/show1.js'></script>
<div class='classBox autoHeight'>
<ul class='subNav'><li><a href='/comiclist/2286/'><span class='a3'>章节列表 </span></a></li><li><a href='/'><span class='a1'>返回首页</span></a></li><li><a href='/top100.htm'><span class='a8'>今日更新</span></a></li>       </ul>
<ul><center><li class='txtA'>科生坠入情网,故尝试证明32话 | 1/19 | 跳至 <input name="page1" id="page1" value="1" type="text" class="bottom" size="3" maxlength="3"> 页 <input type="button" class="bottom" value="确定" onclick="window.location.href='' + document.getElementById('page1').value + '.htm';"></li></center></ul>
<!--显示内容-->
<script language='javascript'>
document.write("<a href='/comiclist/2286/70563/2.htm'><IMG SRC='"+m2007+"newkuku/2019/04/13/理科生坠入情网故尝试证明_第32话/00012JK.jpg'></a><span style='display:none'><img src='"+m201304d+"newkuku/2019/04/13/理科生坠入情网故尝试证明_第32话/00022FL.jpg'></span>");
</script>	
           
    <div class='imgBox'>
<ul class='col_3_1' id='classify_container'>
 </ul></div>
	
	<div class='bottom'>
        <div class='pageLine'><img src='/images/head_line.gif' width='100%'></div>
        <ul class='subNav'>
<li>上一页</li><li>1/19</li><li class='last'><a href='/comiclist/2286/70563/2.htm'><span class='a62'>下一页</span></a></li>       </ul>
    <script type='text/javascript' src='/mg/show2.js'></script>

        <p class='record'>&#169;2019 kukukkk.com</p>

	</div>
</body>
</html>

'''
	url = 'https://m.kukukkk.com/comiclist/2286/70563/1.htm'
	# html = etree.HTML(html)
	# e = html.xpath('//*[@class="subNav"]/li[2]/text()')
	# allPage = (e[0]).split('/')[1]
	urllit = []
	# for i in range(1, int(allPage)):
		



for i in data:
	# print(i['url'])
	# print(i['txt'])
	getPicUrlList(i)
	exit()




def save_pic_from_url_dict(dict_pic, folder_title):
    time.sleep(1)
    path_parent = "download/"
    try:
        if not os.path.exists(os.path.join(path_parent, folder_title)):
            os.makedirs(os.path.join(path_parent, folder_title))
    except  Exception as e:
            print("Error code is %s" % e.code)

    num = 1
    for item in dict_pic:
        time.sleep(2)
        img_url = urllib.request.quote(dict_pic[item], safe='/:?=')
        retry_urlretrieve(img_url, str(os.path.join(path_parent, folder_title))+"//%s.jpg" % num, 6)
        num += 1
